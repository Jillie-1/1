<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <title>å¤§å¯Œç¿æ¸¸æˆç»¼åˆé¡µé¢</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f7fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
        }

        /* éšæœºç‚¹åéƒ¨åˆ†æ ·å¼ */
        #name-section {
            text-align: center;
        }

        #name-list {
            display: none;
        }

        #result {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background-color: #2196f3;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #1976d2;
        }

        /* æ¸¸æˆè§„åˆ™éƒ¨åˆ†æ ·å¼ */
        #rules {
            display: none;
            max-width: 800px;
            padding: 20px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        #rules p {
            margin-bottom: 15px;
        }

        #rules p span {
            display: block;
            text-align: center;
            font-weight: bold;
        }

        #rules p em {
            display: block;
            text-align: left;
            font-style: normal;
            margin-top: 5px;
        }

        /* æ¸¸æˆç•Œé¢éƒ¨åˆ†æ ·å¼ */
        #game-section {
            display: none;
            /* ä½¿æ¸¸æˆç•Œé¢å±…ä¸­ */
            display: none;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        #game-board {
            display: grid;
            grid-template-columns: repeat(11, 80px);
            grid-template-rows: repeat(11, 80px);
            gap: 4px;
            width: fit-content;
            margin: 20px auto;
            position: relative;
        }

        .grid {
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            text-align: center;
        }

        #dice-container {
            grid-column: 4 / span 4;
            grid-row: 4 / span 4;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #dice {
            width: 120px;
            height: 120px;
            background-color: white;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        #dice.rolling {
            transform: rotate(360deg);
        }

        .player {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            position: absolute;
        }

        #player1 {
            background-color: red;
        }

        #player2 {
            background-color: blue;
        }

        #player-labels {
            position: fixed;
            bottom: 20px;
            left: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .player-label {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .player-label .player {
            position: static;
        }

        #game-over-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            display: none;
        }

        #result-popup {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 10;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #result-popup button {
            margin: 5px;
        }

        #grid-0,
        #grid-39 {
            background-color: green;
        }

        .city {
            background-color: yellow;
        }

        .word-chain {
            background-color: pink;
        }

        .you-draw-i-guess {
            background-color: orange;
        }

        .cultural-quiz {
            background-color: purple;
        }

        .situational-communication {
            background-color: brown;
        }

        .tongue-twister {
            background-color: gray;
        }

        .blank {
            background-color: white;
        }
    </style>
</head>

<body>
    <!-- éšæœºç‚¹åéƒ¨åˆ† -->
    <div id="name-section">
        <h1>éšæœºç‚¹åç¨‹åº</h1>
        <div id="name-list">
            <!-- è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šåå­— -->
            <span>å¼ ä¸‰</span>
            <span>æå››</span>
            <span>ç‹äº”</span>
            <span>èµµå…­</span>
        </div>
        <div id="result"></div>
        <button id="start-btn">å¼€å§‹ç‚¹å</button>
        <button id="next-btn" style="display: none;">ä¸‹ä¸€æ­¥</button>
    </div>

    <!-- æ¸¸æˆè§„åˆ™éƒ¨åˆ† -->
    <div id="rules">
        <h2>ä¸­æ–‡ç‰ˆå¤§å¯Œç¿æ¸¸æˆè§„åˆ™</h2>
        <p>
            <span>1. æ¸¸æˆå¼€å§‹åï¼Œç©å®¶1ã€2ä¾æ¬¡å¼€å§‹</span>
            <em>Note: Whether the activity is completed or not affects the number of times a player can roll the dice. For example, within one round, if Player 1 fails to complete the activity while Player 2 succeeds, Player 1 will skip a round, and Player 2 can roll the dice twice in a row. Player 1 can continue to roll and move in the third round.</em>
        </p>
        <p>
            <span>2. åˆ°è¾¾åŸå¸‚åç§°æ—¶ï¼Œæ•™å¸ˆå°†å±•ç¤º2 - 3ä¸ªè¯¥åŸå¸‚çš„æ ‡å¿—å»ºç­‘ï¼Œç­”å¯¹ä¸€ä¸ªå³ç®—æˆåŠŸï¼Œç­”å¯¹0ä¸ªå³ç®—å¤±è´¥ï¼Œéœ€åœä¸€å›åˆ</span>
            <em>When reaching a city name, the teacher will show 2 - 3 landmark buildings of that city. If a player answers one correctly, it counts as a success. If a player answers none correctly, it counts as a failure, and the player has to skip a round.</em>
        </p>
        <p>
            <span>3. åˆ°è¾¾è¯è¯­æ¥é¾™æ—¶ï¼Œç”±å¯¹æ–¹ç©å®¶éšå³è¯´å‡ºä¸€ä¸ªè¯è¯­ï¼Œç©å®¶è¿›è¡Œæ¥é¾™ï¼Œ5ä¸ªå³å¯ï¼Œæ¯ä¸ªé™æ—¶20sï¼Œè‹¥æ˜¯ä¸è¶³5ä¸ªè§†ä¸ºå¤±è´¥</span>
            <em>When reaching the word - chain section, the opposing player randomly says a word, and the current player needs to form a word - chain. Five words are required, with a 20 - second time limit for each word. If the player fails to form five words, it is considered a failure.</em>
        </p>
        <p>
            <span>4. åˆ°è¾¾ä½ ç”»æˆ‘çŒœï¼Œç©å®¶1æ´¾å‡ºä¸¤ä½å­¦ç”Ÿï¼Œæ•™å¸ˆå‘â€œç”»â€è€…å±•ç¤ºäº‹å…ˆå‡†å¤‡å¥½çš„æ–‡å­—å¡ï¼Œâ€œç”»â€è€…æ¼”ç¤ºç»™â€œçŒœâ€è€…ï¼Œé™æ—¶1åˆ†é’Ÿï¼ŒçŒœå¯¹3ä¸ªå³å¯</span>
            <em>When reaching the "You Draw, I Guess" section, Player 1 sends two students. The teacher shows a pre - prepared word card to the "drawer", and the "drawer" demonstrates to the "guesser". The time limit is 1 minute, and guessing 3 words correctly counts as a success.</em>
        </p>
        <p>
            <span>5. åˆ°è¾¾æ–‡åŒ–é—®ç­”æ—¶ï¼Œæ•™å¸ˆè¿›è¡Œæé—®ï¼Œå…±5ä¸ªç­”å¯¹2ä¸ªå³ç®—æˆåŠŸ</span>
            <em>When reaching the cultural quiz section, the teacher asks questions. There are a total of 5 questions, and answering 2 correctly counts as a success.</em>
        </p>
        <p>
            <span>6. åˆ°è¾¾æƒ…æ™¯äº¤é™…æ—¶ï¼Œæ ¹æ®æ•™å¸ˆæä¾›çš„æƒ…æ™¯ï¼Œç›¸åº”ç©å®¶æ¯äººè¯´ä¸€å¥å¯ä½¿ç”¨çš„å¥å­ï¼Œä¸å¯é‡å¤</span>
            <em>When reaching the situational communication section, according to the situation provided by the teacher, each corresponding player should say a usable sentence, and the sentences cannot be repeated.</em>
        </p>
        <p>
            <span>7. åˆ°è¾¾ç»•å£ä»¤æ—¶ï¼Œç»™äºˆç©å®¶3æ¬¡æœºä¼šï¼Œä¸­é€”å¯æ¢äººï¼Œæ³¨æ„å¤šäººä¸€å…±ä¹Ÿåªæœ‰3æ¬¡æœºä¼š</span>
            <em>When reaching the tongue - twister section, the player is given 3 chances. Players can be replaced midway. Note that all players together only have 3 chances.</em>
        </p>
        <p>
            <span>8. ç©ºç™½æ ¼æ— äº‹å‘ç”Ÿã€‚</span>
            <em>Nothing happens when landing on a blank grid.</em>
        </p>
        <p>
            <span>9. æ¥è¿‘ç»ˆç‚¹æ—¶éœ€æ³¨æ„ï¼Œæœ¬æ¸¸æˆè®¾ç½®é€€æ­¥è¿åŠ¨ï¼Œå³è‹¥åœ¨åˆ°è¾¾ç»ˆç‚¹ä¹‹å‰æœ€åä¸€æ¬¡æŠ•æ·çš„æ­¥æ•°ä½¿å¾—ç©å®¶åˆšå¥½åˆ°è¾¾ç»ˆç‚¹åˆ™æ¸¸æˆåœæ­¢ï¼Œè‹¥æŠ•æ·çš„æ­¥æ•°ä½¿å¾—æ£‹å­æ¥ç€å¾€èµ·ç‚¹æ ¼å­èµ°çš„è¯åˆ™è®¾ç½®å¤šå‡ºå¤šå°‘æ­¥æ•°ä»ç»ˆç‚¹å¾€å›èµ°ï¼Œä¸”æ£‹å­åˆ°è¾¾æ ¼å­ç»ˆç‚¹æ—¶è‡ªåŠ¨åœæ­¢æ¸¸æˆ</span>
            <em>When approaching the finish line, note that this game has a "step - back" rule. If the number of steps rolled in the last throw before reaching the finish line allows the player to exactly reach the finish line, the game stops. If the number of steps rolled causes the piece to go past the finish line towards the starting grid, the piece will move back from the finish line by the number of extra steps. The game automatically stops when the piece reaches the finish grid.</em>
        </p>
        <button id="start-game-btn">å¼€å§‹æ¸¸æˆ</button>
    </div>

    <!-- æ¸¸æˆç•Œé¢éƒ¨åˆ† -->
    <div id="game-section">
        <h1 class="text-3xl font-bold text-center mb-4">ä¸­æ–‡ç‰ˆå¤§å¯Œç¿æ¸¸æˆ</h1>
        <div id="game-board">
            <!-- ç”Ÿæˆæ ¼å­ -->
            <div class="grid" id="grid-0">èµ·ç‚¹</div>
            <!-- ä¸Šæ’æ ¼å­ -->
            <div class="grid city" id="grid-1">åŒ—äº¬</div>
            <div class="grid word-chain" id="grid-2">è¯è¯­æ¥é¾™</div>
            <div class="grid you-draw-i-guess" id="grid-3">ä½ ç”»æˆ‘çŒœ</div>
            <div class="grid cultural-quiz" id="grid-4">æ–‡åŒ–é—®ç­”</div>
            <div class="grid situational-communication" id="grid-5">æƒ…æ™¯äº¤é™…</div>
            <div class="grid tongue-twister" id="grid-6">ç»•å£ä»¤</div>
            <div class="grid blank" id="grid-7">ç©ºç™½æ ¼</div>
            <div class="grid city" id="grid-8">ä¸Šæµ·</div>
            <div class="grid word-chain" id="grid-9">è¯è¯­æ¥é¾™</div>
            <!-- å³æ’æ ¼å­ -->
            <div class="grid you-draw-i-guess" id="grid-10">ä½ ç”»æˆ‘çŒœ</div>
            <div class="grid cultural-quiz" id="grid-11">æ–‡åŒ–é—®ç­”</div>
            <div class="grid situational-communication" id="grid-12">æƒ…æ™¯äº¤é™…</div>
            <div class="grid tongue-twister" id="grid-13">ç»•å£ä»¤</div>
            <div class="grid blank" id="grid-14">ç©ºç™½æ ¼</div>
            <div class="grid city" id="grid-15">å¹¿å·</div>
            <div class="grid word-chain" id="grid-16">è¯è¯­æ¥é¾™</div>
            <div class="grid you-draw-i-guess" id="grid-17">ä½ ç”»æˆ‘çŒœ</div>
            <div class="grid cultural-quiz" id="grid-18">æ–‡åŒ–é—®ç­”</div>
            <!-- ä¸‹æ’æ ¼å­ -->
            <div class="grid situational-communication" id="grid-19">æƒ…æ™¯äº¤é™…</div>
            <div class="grid tongue-twister" id="grid-20">ç»•å£ä»¤</div>
            <div class="grid blank" id="grid-21">ç©ºç™½æ ¼</div>
            <div class="grid city" id="grid-22">æ·±åœ³</div>
            <div class="grid word-chain" id="grid-23">è¯è¯­æ¥é¾™</div>
            <div class="grid you-draw-i-guess" id="grid-24">ä½ ç”»æˆ‘çŒœ</div>
            <div class="grid cultural-quiz" id="grid-25">æ–‡åŒ–é—®ç­”</div>
            <div class="grid situational-communication" id="grid-26">æƒ…æ™¯äº¤é™…</div>
            <div class="grid tongue-twister" id="grid-27">ç»•å£ä»¤</div>
            <div class="grid blank" id="grid-28">ç©ºç™½æ ¼</div>
            <!-- å·¦æ’æ ¼å­ -->
            <div class="grid city" id="grid-29">æˆéƒ½</div>
            <div class="grid word-chain" id="grid-30">è¯è¯­æ¥é¾™</div>
            <div class="grid you-draw-i-guess" id="grid-31">ä½ ç”»æˆ‘çŒœ</div>
            <div class="grid cultural-quiz" id="grid-32">æ–‡åŒ–é—®ç­”</div>
            <div class="grid situational-communication" id="grid-33">æƒ…æ™¯äº¤é™…</div>
            <div class="grid tongue-twister" id="grid-34">ç»•å£ä»¤</div>
            <div class="grid blank" id="grid-35">ç©ºç™½æ ¼</div>
            <div class="grid city" id="grid-36">æ­å·</div>
            <div class="grid word-chain" id="grid-37">è¯è¯­æ¥é¾™</div>
            <div class="grid city" id="grid-38">é‡åº†</div>
            <div class="grid" id="grid-39">ç»ˆç‚¹</div>
            <div id="dice-container">
                <div id="dice">ğŸ²</div>
            </div>
        </div>
        <div id="player1" class="player"></div>
        <div id="player2" class="player"></div>
        <div id="player-labels">
            <div class="player-label">
                <div class="player" style="background-color: red;"></div>
                <span>ç©å®¶ 1</span>
            </div>
            <div class="player-label">
                <div class="player" style="background-color: blue;"></div>
                <span>ç©å®¶ 2</span>
            </div>
        </div>
        <div id="game-over-message">
            <p id="winner-message"></p>
        </div>
        <div id="result-popup">
            <p>è¯·é€‰æ‹©ç»“æœï¼š</p>
            <button id="success-btn">æˆåŠŸ</button>
            <button id="fail-btn">å¤±è´¥</button>
        </div>
        <audio id="game-music" src="https://example.com/your-music.mp3" autoplay loop></audio>
    </div>

    <script>
        const nameList = document.getElementById('name-list').children;
        const result = document.getElementById('result');
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const rules = document.getElementById('rules');
        const startGameBtn = document.getElementById('start-game-btn');
        const nameSection = document.getElementById('name-section');
        const gameSection = document.getElementById('game-section');

        let intervalId;

        startBtn.addEventListener('click', () => {
            startBtn.disabled = true;
            intervalId = setInterval(() => {
                const randomIndex = Math.floor(Math.random() * nameList.length);
                result.textContent = nameList[randomIndex].textContent;
            }, 100);
            setTimeout(() => {
                clearInterval(intervalId);
                nextBtn.style.display = 'block';
            }, 3000);
        });

        nextBtn.addEventListener('click', () => {
            nameSection.style.display = 'none';
            rules.style.display = 'block';
        });

        startGameBtn.addEventListener('click', () => {
            rules.style.display = 'none';
            gameSection.style.display = 'flex';

            const dice = document.getElementById('dice');
            const player1 = document.getElementById('player1');
            const player2 = document.getElementById('player2');
            let currentPlayer = 1;
            let player1Position = 0;
            let player2Position = 0;
            const gameOverMessage = document.getElementById('game-over-message');
            const winnerMessage = document.getElementById('winner-message');
            const resultPopup = document.getElementById('result-popup');
            const successBtn = document.getElementById('success-btn');
            const failBtn = document.getElementById('fail-btn');
            const gameMusic = document.getElementById('game-music');
            let isPlayerPaused = { 1: false, 2: false };

            function rollDice() {
                if (gameOverMessage.style.display === 'block' || isPlayerPaused[currentPlayer]) {
                    isPlayerPaused[currentPlayer] = false;
                    currentPlayer = currentPlayer === 1 ? 2 : 1;
                    return;
                }
                dice.classList.add('rolling');
                setTimeout(() => {
                    dice.classList.remove('rolling');
                    const result = Math.floor(Math.random() * 6) + 1;
                    dice.textContent = result;
                    if (currentPlayer === 1) {
                        player1Position = calculateNewPosition(player1Position, result);
                        movePlayer(player1, player1Position);
                        if (player1Position === 39) {
                            endGame(1);
                            return;
                        }
                    } else {
                        player2Position = calculateNewPosition(player2Position, result);
                        movePlayer(player2, player2Position);
                        if (player2Position === 39) {
                            endGame(2);
                            return;
                        }
                    }
                    resultPopup.style.display = 'flex';
                }, 300);
            }

            function calculateNewPosition(currentPosition, steps) {
                if (currentPosition + steps <= 39) {
                    return currentPosition + steps;
                } else {
                    const overSteps = (currentPosition + steps) - 39;
                    return 39 - overSteps;
                }
            }

            function movePlayer(player, position) {
                const grid = document.getElementById(`grid-${position}`);
                const rect = grid.getBoundingClientRect();
                player.style.left = rect.left + rect.width / 2 - player.offsetWidth / 2 + 'px';
                player.style.top = rect.top + rect.height / 2 - player.offsetHeight / 2 + 'px';
            }

            function handleSuccess() {
                resultPopup.style.display = 'none';
                currentPlayer = currentPlayer === 1 ? 2 : 1;
            }

            function handleFail() {
                resultPopup.style.display = 'none';
                isPlayerPaused[currentPlayer] = true;
                currentPlayer = currentPlayer === 1 ? 2 : 1;
            }

            function endGame(winner) {
                gameOverMessage.style.display = 'block';
                winnerMessage.textContent = `ç©å®¶ ${winner} è·èƒœï¼æ¸¸æˆç»“æŸã€‚`;
                dice.removeEventListener('click', rollDice);
                gameMusic.pause();
            }

            dice.addEventListener('click', rollDice);
            successBtn.addEventListener('click', handleSuccess);
            failBtn.addEventListener('click', handleFail);

            movePlayer(player1, player1Position);
            movePlayer(player2, player2Position);
        });
    </script>
</body>

</html>    